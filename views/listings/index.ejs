<% layout("/layouts/boilerplate") %>


<style>
    #filters{
        display: flex;
        flex-wrap: wrap;
        align-items: center;
    }
    .filter{
        text-align: center;
        margin-right: 2rem;
        margin-top: 2rem;
        opacity: 0.7;
    }
    .filter:hover{
        opacity: 1;
    }
    .filter p {
        font-size: 0.8rem;
    }
    .tax-info{
        display: none;
    }
    .tax-toggle{
        border: 1px solid black;
        border-radius: 1rem;
        height: 3.25rem;
        padding: 1rem;
        margin-left: 2rem;
        display: flex;
        align-items: center;
    }
</style>

    <body>
        <!-- <h3> All Listing</h3> -->
        <!--<form method="GET"action="/listings/new">
 <button> create New Listing</button>
</form> -->
<div id="filters">
    <div class="filter">
       <div><i class="fa-solid fa-fire"></i></div> 
        <div>trending</div>
    </div>
    <div class="filter">
        <div><i class="fa-solid fa-bed"></i></div> 
         <div>rooms</div>
     </div>
     <div class="filter">
        <div><i class="fa-solid fa-mountain-city"></i></div> 
         <div>mountain-cities</div>
     </div>
     <div class="filter">
         <div><i class="fa-solid fa-chess-rook"></i></div> 
          <div>castles</div>
      </div>
      <div class="filter">
        <div><i class="fa-solid fa-person-swimming"></i></div> 
         <div>pools</div>
     </div>
     <div class="filter">
         <div><i class="fa-solid fa-campground"></i></div> 
          <div>camping</div>
      </div>
      <div class="filter">
        <div><i class="fa-solid fa-tractor"></i></div> 
         <div>farms</div>
     </div>
     <div class="filter">
        <div><i class="fa-solid fa-snowman"></i></div> 
         <div>arctic</div>
     </div>
     <div class="filter">
        <div><i class="fa-solid fa-igloo"></i></div> 
         <div>Domes</div>
     </div>
     <div class="filter">
        <div><i class="fa-solid fa-ship"></i></div> 
         <div>Boats</div>
     </div>
     <div>
        <div class="tax-toggle">
            <div class="form-check-reverse form-switch">
            <input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault">
            <label class="form-check-label" for="flexSwitchCheckDefault">Display total after taxes</label>
          </div> 
        </div>
        </div> 
     </div>
     

     
     <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 mt-3">

        <% if (allListings && allListings.length > 0) { %>
            <!-- <div class="row"> -->
                <% for (let listing of allListings) { %>
                    <a href="/listings/<%= listing._id %>" class="listing-links">
                        <div class="card col listing-card">
                            <img src="<%= listing.image && listing.image.url ? listing.image.url : 'https://images.unsplash.com/photo-1743653537429-a94889a6fd47?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHx0b3BpYy1mZWVkfDN8Ym84alFLVGFFMFl8fGVufDB8fHx8fA%3D%3D' %>"
                                class="card-img-top" alt="listing_image"
                                style="height: 20rem; object-fit: cover;"/>
                            <div class="card-body">
                                <p class="card-text">
                                    <b><%= listing.title || "No title" %></b> <br/>
                                    â‚¹<%= listing.price ? listing.price.toLocaleString("en-IN") : "N/A" %>/night
                                    <i class="tax-info">&nbsp;&nbsp;+18% GST</i>
                                </p>
                            </div>
                        </div>
                    </a>
                <% } %>
            <!-- </div> -->
        <% } else { %>
            <div class="alert alert-warning text-center" role="alert">
                <h3>No listings found!</h3>
            </div>
        <% } %>
        


            </div>
            <script>
                let taxSwitch = document.getElementById("flexSwitchCheckDefault");
                taxSwitch.addEventListener("click",()=>{
                    let taxInfo = document.getElementsByClassName("tax-info");
                   for(info of taxInfo){
                    if(info.style.display !="inline"){
                        info.style.display = "inline";
                    }else{
                        info.style.display = "none";
                    }
                   
                   }
                })
            </script>
    </body>

    </html>